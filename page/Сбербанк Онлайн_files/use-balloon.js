var show={registrationLink:"",recoverPasswordLink:"",restoreLoginLink:"",restoreType:"",typePage:"",isSafari:/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),hintBalloon:function(b,a){$(".field_error").remove();if(!$("div[ripple]").length&&!$(".invalid-login").length){$("."+b+"-div").append('<div class="field_error '+b+'">'+a+"</div>");}$("."+this.switchWord(b)).remove();},hintPhoneBalloon:function(b,a){$(".field_error").remove();if(!$("div[ripple]").length&&!$(".invalid-login").length){$("."+b+"-div").append('<div class="field_error field_phone_error '+b+'">'+a+"</div>");}$("."+b).css({"width":"13em","height":"auto","padding":"8px 10px 10px 13px"});$("."+this.switchWord(b)).remove();},hintLogin:function(){if($("#enterPhone").prop("checked")){show.hintPhoneBalloon("login",'Введите номер телефона, активированный в личном кабинете или при <a class="aWhite" href="'+this.registrationLink+'">регистрации</a>');}else{show.hintBalloon("login","Введите логин");}},hintPass:function(){show.hintBalloon("password","Введите пароль");},hideErrors:function(){$(".field_error").remove();},switchWord:function(a){return a==="password"?"login":"password";},balloons:function(){function a(){if(!$("#login").val()){show.hintLogin();}else{if(!$("#password").val()){show.hintPass();}}}$("#login").focusout(function(){a();});$("#password").focusout(function(){if($("#password").val()){return;}if($("#login").val()){show.hintPass();}else{show.hintLogin();}});function b(){$(".promoter-id-div").children(".field_error").remove();}$("#promoterId").focus(function(){if(!$("#promoterId").val()){$(".promoter-id-div").append('<div class="field_error">Поле заполняется, если вход выполняется с помощью сотрудника банка</div>');}});$("#promoterId").keyup(function(){if($("#promoterId").val()){b();}});$("#promoterId").focusout(function(){b();a();});},redBalloon:function(d,c){if(this.typePage==="prefilling-login"){var b="<div class='invalid-login'>"+'<div style="padding-top: 0.23em; padding-bottom: 0.5em;">Вы неправильно ввели пароль.</br>У вас осталось <b>'+c+"</b></div>";if(this.restoreType=="both"||this.restoreType=="password"){b+='<div><a class="aWhite" href="#" onclick="recover()">Забыли пароль?</a></div>';}b+='<div class="invalid-login-arrow">.</div></div>';$(".b-field").first().append(b);$(".invalid-login").css({"top":"28px","left":"335px","width":"16em","height":"auto","padding":"8px 0 10px 13px"});$(".invalid-login-arrow").css({"top":"37%","right":"91.5%"});$("#fraud").before(" попытки.");}else{var a=$(".login-div");a.append("<div class='invalid-login'>"+'<div style="padding-top: 0.23em;">'+d+"</div>"+'<div class="invalid-login-arrow">.</div></div>');}$("b-field").addClass("-error");$(".invalid-login").bind("click",function(){$(this).remove();});this.removeRedBalloonIfInputsChanged($(".login-div"));formInput.setRedBorderAndFocus();},redBalloonLastAttempt:function(a,c){a=parseInt(a,10);var b=(a>0)?a+"ч ":"";if(this.typePage==="prefilling-login"){var d='<div class="invalid-login">'+'<div class="textLine">Неверный пароль.</div>'+'<div class="textLine">Следующая неверная попытка заблокирует вход в Сбербанк Онлайн на '+b+c+" мин.</div>";if(this.restoreType=="both"||this.restoreType=="password"){d+='<div>Если не можете войти,</br> <a class="aWhite" href="#" onclick="recover()">смените пароль</a>. </div>';}d+='<div class="invalid-login-arrow">.</div>'+"</div>";$(".b-field").first().append(d);$(".invalid-login").css({"top":"6px","left":"335px","width":"16em","height":"auto","padding":"8px 0 10px 13px"});$(".invalid-login-arrow").css({"top":"43%","right":"91.5%"});}else{$(".b-field").first().append('<div class="invalid-login">                         <div class="textLine">Неверный логин или пароль.</div>                         <div class="textLine">Следующая неверная попытка заблокирует вход в Сбербанк Онлайн на '+b+c+' мин.</div>                           <div>Если не можете войти,</br> <a class="aWhite" href="'+prepareUrlForESA("/CSAFront/page/login-error.do")+'">восстановите доступ</a>. </div>                         <div class="invalid-login-arrow">.</div>                      </div>');$(".invalid-login").css({"top":"-49px","width":"15em","height":"auto","padding":"8px 0 10px 13px"});$(".invalid-login-arrow").css({"top":"43%","right":"90.5%"});}$(".aWhite").click(function(e){show.unableEnterPopup(e);});this.removeRedBalloonIfInputsChanged($(".login-div"));formInput.setRedBorderAndFocus();},redBalloonPhoneError:function(){$(".b-field").first().append('<div class="invalid-login">                     <div class="textLine">Неверный номер телефона или пароль.</div>                     <div class="textLine">Возможно, Вы не подключали вход по номеру телефона.</div>                     <div class="textLine">Для активации входа по номеру телефона <a class="aWhite" href="'+this.registrationLink+'">пройдите регистрацию заново</a>.</div>                     <div class="invalid-login-arrow">.</div>                  </div>');$(".invalid-login").css({"top":"-30px","width":"15em","height":"auto","padding":"8px 10px 10px 13px"});
$(".invalid-login-arrow").css({"top":"25%","right":"90.5%"});this.removeRedBalloonIfInputsChanged($(".login-div"));formInput.setRedBorderAndFocus();},redBalloonPhoneLastError:function(a,c){a=parseInt(a,10);var b=(a>0)?a+"ч ":"";$(".b-field").first().append('<div class="invalid-login">                     <div class="textLine">Неверный номер телефона или пароль.</div>                     <div class="textLine">Возможно, Вы не подключали вход по номеру телефона.</div>                     <div class="textLine">Для активации входа по номеру телефона <a class="aWhite" href="'+this.registrationLink+'">пройдите регистрацию заново</a>.</div>                     <div class="textLine">Следующая неверная попытка заблокирует вход в Сбербанк Онлайн на '+b+c+' мин.</div>                       <div class="invalid-login-arrow">.</div>                  </div>');$(".invalid-login").css({"top":"-49px","width":"15em","height":"auto","padding":"8px 10px 10px 13px"});$(".invalid-login-arrow").css({"top":"25%","right":"90.5%"});this.removeRedBalloonIfInputsChanged($(".login-div"));formInput.setRedBorderAndFocus();},removeRedBalloonIfInputsChanged:function(a){a.add($(".password-div")).bind("input",function(){$(".invalid-login").remove();$(".b-field.-error").removeClass("-error");});},redBalloonProfileBlocked:function(b,e,a,d){a=parseInt(a,10);var c=(a>0)?a+"ч ":"";var f=$("div #sendForm");f.hide();$(".b-side-box").prepend('        <div class="b-auth auth-block">            <div class="first-block-info">Вход в профиль<br/>заблокирован <b>до '+show.getCurrentTimeZoneHours(b)+":"+e+'</b></div>            <div class="second-block-info">Включена защита от подбора<br/>пароля на '+c+d+' мин.</div>            <div class="third-block-info">Если вы забыли логин<br/>или пароль, восстановите их.</div>            <div class="b-btn btn-small btn-white">                <div class="auth-block-btn-text">Восстановить доступ</div>                <button type="button" class="btn_hidden"></button>            </div>            <div class="auth-block-link">                <a class="auth-block-link-cancel" href="'+prepareUrlForESA("/CSAFront/page/login-error.do")+'">Отмена</a>            </div>            <div class="rectangle"> </div>        </div>');this.addActionOnCancelButton(f);this.addActionOnUnableEnterLink();},getCurrentTimeZoneHours:function(b){var e=60;var c=3;var d=new Date().getTimezoneOffset()/e;var a=parseInt(b)-c-d;if(a>23){return a-24;}else{if(a<0){return a+24;}else{return a;}}},addActionOnCancelButton:function(a){$(".auth-block-link-cancel").click(function(b){b.preventDefault();$(".b-auth.auth-block").remove();a.show();return false;});},addActionOnUnableEnterLink:function(){$(".b-auth.auth-block .b-btn.btn-small.btn-white .btn_hidden").click(function(a){show.unableEnterPopup(a);});},unableEnterPopup:function(a){a.preventDefault();new UnableEnterPopup(this.registrationLink,this.restoreLoginLink,this.recoverPasswordLink,this.restoreType,"+ 7 (495) 500-55-50, 8 (800) 555-55-50 или 900").makePopup();return false;},tabs:function(){if(this.isSafari){$(".tab-safari").attr("tabindex","0");}$(".btn_hidden").on("focus",function(){$(".b-btn.btn-yellow").addClass("focused");}).on("blur",function(){$(".b-btn.btn-yellow").removeClass("focused");});$(".auth_body").css("height","295px");$(".auth_body_promoter").css("height","350px");}};var formInput={removeRedBorder:function(){$("#loginForm").bind("validateAndSubmitEvent",function(){$(".b-field.-error").removeClass("-error");if($(".invalid-login").length){$(".field_error").remove();formInput.setRedBorderAndFocus();}});},setRedBorderAndFocus:function(){var a=$("#password");a.focus();a.css("border-width","1");setTimeout(function(){$(".b-field").addClass("-error");},220);}};