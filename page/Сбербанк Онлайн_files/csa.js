var url;var skinUrl;var SLIDER_WITHOUT_CONTROLS={controls:false};function initCSA(b,a){url="/"+b;skinUrl=a;if(document.getElementById("MainPageNews")!=null){ajaxQuery(null,url+"/async/news.do",setNewsOnMainPage,"json",false);}if(document.getElementById("frontInfo")!=null){ajaxQuery(null,url+"/async/tabs.do",function(){},null,false);}}jQuery(document).ready(function(){var b=/[dmy]/gi;if($(".Datedate-pick").datePicker){var d=$(".Datedate-pick").datePicker({displayClose:true,chooseImg:skinUrl+"/skins/commonSkin/images/datePickerCalendar.gif",dateFormat:"dd/mm/yyyy"});d.dpApplyMask();}customPlaceholder.init();if(isIE(6)){try{var a=document.getElementById("loading");if(a!=null){plateSrc=skinUrl+"/images/plate.png";a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+plateSrc+",sizingMethod='scale')";}document.execCommand("BackgroundImageCache",false,true);}catch(c){}}buttonAddEventClick("butGreen","butGreenClick");});function buttonAddEventClick(a,b){if($("."+a)[0]!=undefined){$(document).on("mousedown","."+a,function(){$(this).addClass(b);});$(document).on("mouseup","."+a,function(){$(this).removeClass(b);});$(document).on("mouseleave","."+a,function(){$(this).removeClass(b);});}}function initFirstTab(){var b="#frontInfo .tabs-names ul";var a=$(b+">li:first a").get(0);initSliders(a.hash+"_sliders");}function initSliders(a){var b=$(a).children().length;if(b>1){$(a).bxSlider({});}else{if(b==1){$(a).bxSlider(SLIDER_WITHOUT_CONTROLS);}}}function setNewsOnMainPage(d){var b="";if(d==undefined||d.news==undefined){return;}for(var a in d.news){if(d.news.hasOwnProperty(a)){var c="";if(d.news[a].important=="HIGH"){c="news-main";}b=b+"<li class='news_item "+c+"'><div class='news_cap'><a href='"+url+"/news/view.do?id="+d.news[a].id+"' class='aBlack'><span>";b=b+d.news[a].title+"</span></a></div><small class='news_date'>"+d.news[a].date+"</small></li>";}}$("#MainPageNews").html(b);$(".b-news").jNews();}function sendedAjaxResultForNews(a){if(trim(a)==""){window.location.reload();return;}if(a.search("news-list")==-1){window.location.reload();return;}$("#news").html(a);}function ajaxTableList(d,g,e,c){var i=getElement("filter(typeDate)").value;var h=getElement("filter(fromDate)").value;var f=getElement("filter(toDate)").value;var j=customPlaceholder.getCurrentVal(getElement("filter(filterSearch)"));var a=getElement("filter(filterImportant)").checked;var b=e+"="+c+"&"+d+"="+g;if(i!=""){b=b+"&typeDate="+i;}if(h!=""){b=b+"&fromDate="+h;}if(f!=""){b=b+"&toDate="+f;}if(j!=""){b=b+"&search="+j;}if(a!=""){b=b+"&important="+a;}ajaxQuery(b,url+"/async/news/list.do",sendedAjaxResultForNews,null);}function sendAjaxList(d){var c=getElement("filter(typeDate)").value;var f=getElement("filter(fromDate)").value;var b=getElement("filter(toDate)").value;var e=customPlaceholder.getCurrentVal(getElement("filter(filterSearch)"));var a=getElement("filter(filterImportant)").checked;var g="filter(typeDate)="+c;if(f!=""){g=g+"&filter(fromDate)="+f;}if(b!=""){g=g+"&filter(toDate)="+b;}if(e!=""){g=g+"&filter(search)="+e;}if(a!=""){g=g+"&filter(important)="+a;}ajaxQuery(g,d,sendedAjaxResultForNews,null);}function initTabs(d,e){var b="#"+d+" .tabs-names ul";var c="#"+d+" div.tabs-contents";var a=$(b+">li:first a").get(0);$(c+">div").hide().filter(a.hash).show();$(b+">li:first").addClass("activeSecondMenu greenFirst");$(b+">li a").click(function(){$(c+">div").hide().filter(this.hash).show();if($(this.hash+"_sliders>li").length>0){e(this.hash);}$(b+">li:first").removeClass("greenFirst");$(b+">li:last").removeClass("greenLast");$(b+">li").removeClass("activeSecondMenu");var f=$(this).closest("li");$(f).addClass("activeSecondMenu");if($(f).is(":first-child")){$(f).addClass("greenFirst");}else{if($(f).is(":last-child")){$(f).addClass("greenLast");}}return false;});}function clickIfEnterKeyPress(a,c){var b=navigator.appName=="Netscape"?c.which:c.keyCode;if(b!=13){return;}a.onclick();}function goTo(b){var a=b.split("/");var d=a[a.length-1].split("?")[0];var c=(d==="CSAFrontLogin.do"||d==="ESALogin.do");if(c){showRippleOnLoginButton();}else{showOrHideWaitDiv();}window.location.href=b;}function AuthForm(a){this.isShowCaptcha=a;this.showForm=function(c,b){this.reset();$("#authBlock .enterBlock").hide().filter("#"+c).show();if(this.isShowCaptcha){this.showCaptcha(c);}else{this.hideCaptcha(c);}if(b){this.setFocus();}setCurrentHelpId(c);};this.fsoPublish=function(b){new FSOObject(b).publish();};this.updateForm=function(b,d){var c=this.getCurrentBlock();if(d){$(c).find("input[type='password']").filter(":not(.inputPlaceholder)").val("").blur();}this.isShowCaptcha=b;if(c!=undefined){if(b){this.showCaptcha(c.id);}else{this.hideCaptcha(c.id);}}};this.setFocus=function(){var c=$(this.getCurrentBlock()).find(":input").filter(":visible");if(c.length>0){var b=c.get(0);$(b).val(" "+$.trim($(b).val()));b.focus();}};this.submit=function(d,b){var c=$(d).closest("form").get(0);FormSubmitter.submit(c,b);};this.showCaptcha=function(c){var b=$("#authBlock .enterBlock").filter("#"+(c==null?this.getCurrentBlock().id:c)).find(".captcha-block");
$(b).find(":input").filter(":not(.inputPlaceholder)").val("").blur();b.find("#captcha").html('<img src="captcha.png?='+Math.random()+'" width="100%" height="100%">');b.show();};this.updateCaptcha=function(){this.showCaptcha();};this.hideCaptcha=function(){var b=$("#authBlock .enterBlock").find(".captcha-block");$(b).find(":input").filter(":not(.inputPlaceholder)").val("").blur();b.find("#captcha").empty();b.hide();};this.onEnterKeyPress=function(e,b,c){e=e||window.event;var d=navigator.appName=="Netscape"?e.which:e.keyCode;if(d!=13){return;}preventDefault(e);if(c!=null&&c){this.hidePassword();this.submit(e.target||e.srcElement,b);}};this.reset=function(d,c){var e=$("#authBlock .enterBlock");if(d){e.filter("#"+d);}var b=e.find("form").filter(":not(.hidden-form)").find(":input").filter(":not(.inputPlaceholder)");if(c){b.filter("#"+c);}b.val("").blur();};this.getCurrentBlock=function(){return $("#authBlock .enterBlock").filter(":visible").get(0);};this.hidePassword=function(){var c=document.getElementById("password");var b=document.getElementById("hiddenPasswordField");b.value=c.value;c.value="";};}var stageForm={send:function(a){FormSubmitter.submit($("#stageForm form").get(0),a);},load:function(a){$("#stageForm").html(a);if($("#stageForm")[0]!=undefined){win.open("stageForm");}},close:function(){$("#stageForm").empty();if($("#stageForm")[0]!=undefined){win.close("stageForm");}}};var FormSubmitter={isWait:false,submit:function(b,a){new RSAObject().toSubmitFormParameters(b);if(this.isWait){return;}this.isWait=true;this.isWait=ajaxQuery($(b).find(":input").filter(":not(.inputPlaceholder)").serializeToWin()+"&operation="+a,$(b).attr("action"),this.processResponce);},processResponce:function(e){var d="<div>"+e+"</div>";if($(d).find("input[name='$$turingTestFlag']").size()>0){displayError("Для продолжения работы с системой закройте это окно и введите код, изображенный на картинке.");authForm.updateForm(true);}else{if($(d).find("input[name='$$errorFlag']").size()>0){stageForm.close();displayError(e);authForm.updateForm(false,true);var a=$(d).find("div[id='fraud']");if(a.size()>0){authForm.fsoPublish(a[0].onclick().fraud);}}else{if($(d).find("input[name='$$reset']").size()>0){overlay.switchPopup("CustomPopup",htmlOtherLoginChosen);}else{if($(d).find("input[name='$$POSTRedirect']").size()>0){var c=$(d).find("input[name='$$POSTRedirect']").get(0);$("#redirectPayOrderForm").attr("action",c.value).submit();}else{if($(d).find("input[name='$$redirect']").size()>0){var b=$(d).find("input[name='$$redirect']").get(0);goTo(b.value);return;}else{stageForm.load(e);authForm.updateForm(false);}}}}}FormSubmitter.isWait=false;}};function reloadNews(){if(document.getElementById("MainPageNews")!=null){ajaxQuery(null,url+"/async/news.do",setNewsOnMainPage,"json",false);}}function reloadBlockingMessage(){ajaxQuery(null,url+"/async/blockingMessage.do",setBlockingMessage,null,false);}function setBlockingMessage(b){if(trim(b)==""){return;}var a=$(b).find("#blockingMessage");if(a.length==0){$("#blocking-message-restriction-block").empty();}else{$("#blocking-message-restriction-block").html(a.html());}}