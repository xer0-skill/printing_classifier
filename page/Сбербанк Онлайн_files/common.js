"use strict";var app={$elem:$("body"),$wnd:$(window),$doc:$(document),$wrp:$(".g-wrapper"),$side:$(".g-side"),ie:document.all&&document.querySelector?8:false,getParams:function(a){a=a.length?a[0]:a;if(a.nodeType&&a.nodeType===1&&a.onclick){var b=a.onclick();return $.isPlainObject(b)?b:{};}else{return{};}},getCSS3:(function(){var c=document.documentElement.style,b=["ms","o","Moz","webkit"],d=function(e){return(e.charAt(1)||e.charAt(0)).toUpperCase();},a={};return function(e){return e in a?a[e]:(e in c?e:function(f,g){g=g.replace(/(-.)|(^.)/g,d);while(f--){if(!(b[f]+g in c)){continue;}a[e]=("-"+b[f]+"-"+e).toLowerCase();return a[e];}return a[e]="";}(b.length,e));};}()),setSizes:function(){clearTimeout(app.timer);app.timer=setTimeout(function(){app.$wrp.css("min-height",app.$side.outerHeight(true)+"px");});}};var overlay;$(function(){$("#loginForm").jForm();$("#Secure").jSecure();$("#Backgrounds").jBgSlider({duration:750,sync:$("#Slides .slides_slide")});overlay=new JOverlay(".g-overlay");app.setSizes();app.$wnd.on("resize",app.setSizes);if(app.ie){app.$wnd.JMediaHeightIe([43,48]);}});(function(c){var b="jBgSlider";function a(e,d){this.$elem=c(e);this.$wrapper=this.$elem.parent();this.cfg=c.extend({auto:7000,duration:500,sync:c("")},d,app.getParams(e));this.$slides=this.$elem.find(".bg_slide");this.$paging=this.$elem.find(".bg_paging");this.switchSlide=this.switchSlide();this.current={slide:null,bg:null};this.animate=false;this.cfg.sync.on("mouseenter",c.proxy(this.disableAutoSlide,this));this.cfg.sync.on("mouseleave",c.proxy(this.enableAutoSlide,this));app.$wnd.on("mouseenter",c.proxy(this.enableAutoSlide,this));app.$wnd.on("mouseleave mouseout",c.proxy(this.disableAutoSlide,this));this.$paging.on("click",c.proxy(this.clickSwitch,this));app.$wnd.on("mousewheel",c.proxy(this.wheelSwitch,this));app.$wnd.on("DOMMouseScroll",c.proxy(this.wheelSwitch,this));this.init();this.setSlide(0);this.enableAutoSlide();}a.prototype={constructor:a,init:function(){if(app.ie){var d=this;c.fn.jBackgroundSize&&d.$slides.jBackgroundSize();d.$elem.height(d.$wrapper.height());app.$wnd.on("resize",function(){d.$elem.height(d.$wrapper.height());});}},drawPaging:function(f){var e="";for(var g=0,d=this.$slides.length;g<d;g++){e+='<a class="bg_page'+(f==g?" current":"")+'"></a>';}this.$paging.html(e);},setSlide:function(d){this.current.slide=this.$slides.eq(d).css({visibility:"visible",display:"block",opacity:"1"});this.current.sync=this.cfg.sync.eq(d).css({visibility:"visible",display:"block",opacity:"1"});this.drawPaging(d);this.$elem.trigger("slider:change",{url:this.current.slide.css("background-image"),duration:0});},animJS:function(d){if(this.animate||d==this.current.slide.index()){return;}this.animate=true;this.current.slide.fadeOut(this.cfg.duration);this.current.sync.fadeOut(this.cfg.duration*0.75);this.current.slide=this.$slides.eq(d);this.current.sync=this.cfg.sync.eq(d);this.current.slide.fadeIn(this.cfg.duration);this.current.sync.fadeIn(this.cfg.duration*1.25,c.proxy(function(){this.animate=false;},this));this.drawPaging(d);this.$elem.trigger("slider:change",{url:this.current.slide.css("background-image"),duration:this.cfg.duration});},animCSS3:function(d){if(this.animate||d==this.current.slide.index()){return;}this.animate=true;this.current.slide.addClass("animFadeOut").css({opacity:"0",zIndex:"15"});this.current.sync.addClass("animFadeOut").css({opacity:"0",zIndex:"15"});setTimeout(c.proxy(function(e,f){e.css({visibility:"hidden",opacity:"",zIndex:""}).removeClass("animFadeOut");f.css({visibility:"hidden",opacity:"",zIndex:""}).removeClass("animFadeOut");},this,this.current.slide,this.current.sync),1250);this.current.slide=this.$slides.eq(d);this.current.sync=this.cfg.sync.eq(d);this.current.slide.addClass("animFadeIn").css({visibility:"visible",opacity:"1"});this.current.sync.addClass("animFadeIn").css({visibility:"visible",opacity:"1"});setTimeout(c.proxy(function(e,f){this.current.slide.removeClass("animFadeIn");this.current.sync.removeClass("animFadeIn");this.animate=false;},this),1250);this.drawPaging(d);this.$elem.trigger("slider:change",{url:this.current.slide.css("background-image"),duration:this.cfg.duration});},switchSlide:function(){if(app.getCSS3("transition")){this.$slides.addClass("css3transition");this.cfg.sync.addClass("css3transition");return this.animCSS3;}else{return this.animJS;}},clickSwitch:function(d){this.enableAutoSlide();this.switchSlide(c(d.target).index());},wheelSwitch:function(h){if(this.animate||app.$wrp.height()>app.$wnd.height()){return;}var g=h.originalEvent,i=(g.wheelDelta)?g.wheelDelta*1:g.detail*-1,d,f;if(i>0){f=this.current.slide.prev();d=f.length?f.index():this.$slides.length-1;}else{f=this.current.slide.next();d=f.length?f.index():0;}this.enableAutoSlide();this.switchSlide(d);},enableAutoSlide:function(){clearInterval(this.autoAnim);this.autoAnim=setInterval(c.proxy(function(){var e=this.current.slide.next(),d=e.length?e.index():0;this.switchSlide(d);},this),this.cfg.auto);},disableAutoSlide:function(){clearInterval(this.autoAnim);
}};c.fn[b]=function(d){return this.each(function(){if(!c.data(this,b)){c.data(this,b,new a(this,d));}});};})(jQuery);(function(c){var a="jSecure";function b(e,d){this.$elem=c(e);this.cfg=c.extend({},d,app.getParams(e));this.$trigger=this.$elem.find(".secure_next");this.$block=this.$elem.find(".secure_blocks");this.$notes=this.$elem.find(".secure_block");this.current=this.$notes.hide().eq(0).show();this.$trigger.on("click",c.proxy(this.showNext,this));app.$wnd.on("resize",c.proxy(this.resize,this));}b.prototype={constructor:b,showNext:function(){var d=this.current.next();d=d.length?d:this.$notes.eq(0);this.$block.height(this.$block.height());this.current.css("position","absolute").fadeOut(250);this.current=d.css("position","absolute").fadeIn(250);this.$block.animate({height:d.height()},250);},resize:function(){this.$block.height(this.current.height());}};c.fn[a]=function(d){return this.each(function(){if(!c.data(this,a)){c.data(this,a,new b(this,d));}});};})(jQuery);(function(c){var a="jNews";function b(e,d){this.$elem=c(e);this.$inner=this.$elem.find(".news_inner");this.$blur=this.$elem.find(".news_blur");this.$fade=this.$elem.find(".news_fade");this.changePic=this.changePic();app.$wnd.on("resize",c.proxy(this.refresh,this));c("#Backgrounds").on("slider:change",c.proxy(this.changePic,this));this.refresh();}b.prototype={constructor:b,changePic:function(){if(app.getCSS3("transition")){return this.animCSS3;}else{return this.animJS;}},animJS:function(g,d){var f=this.$blur.clone().css({"background-image":d.url,"z-index":1}).fadeTo(0,0);this.$blur.fadeTo(d.duration,0);f.insertAfter(this.$blur).fadeTo(d.duration,1,c.proxy(function(){this.$blur.css("background-image",d.url).fadeTo(0,1);f.remove();},this));},animCSS3:function(g,d){var f=this.$blur.clone().css({"background-image":d.url,"z-index":1,opacity:"0"});this.$fade.addClass("animShortFade");this.$blur.addClass("animFadeOut").css("opacity","0");f.insertBefore(this.$blur).addClass("animFadeIn").css("opacity","1");setTimeout(c.proxy(function(){this.$fade.removeClass("animShortFade");},this),650);setTimeout(c.proxy(function(){this.$blur.remove();this.$blur=f.removeClass("animFadeIn");},this),1250);},refresh:function(){this.$blur.css({width:app.$wrp.width(),height:app.$wrp.height(),left:-this.$inner.offset().left,top:-this.$inner.offset().top});}};c.fn[a]=function(d){return this.each(function(){if(!c.data(this,a)&&!app.ie){c.data(this,a,new b(this,d));}});};})(jQuery);(function(c){var a="jForm";function b(e,d){this.$elem=c(e);this.cfg=c.extend({},d,app.getParams(e));this.validator=new this.Validator();this.fields=this.createFields(".b-field");this.fields[0].input.focus();}b.prototype={constructor:b,createFields:function(e){var d=[],f=this;this.$elem.find(".b-field").each(function(){d.push(new f.Field({elem:c(this)}));});return d;},submit:function(){var d=this;if(d.validate()){d.response();}},clearVSPValidator:function(){var d=this;d.fields[3].valid={};},fillVSPValidator:function(){var d=this;d.fields[3].valid={required:true,minLen:3,maxLen:7};},validate:function(){var g=this,e;for(var f=0,d=g.fields.length;f<d;f++){e=g.validator.test(g.fields[f].getValue(),g.fields[f].valid,g.fields[f].type);if(e){if(c.isFunction(e)){e.call();}else{g.fields[f].addError(e);}return false;}else{g.fields[f].removeError();}}return true;},response:function(){submitData();}};b.prototype.Validator=function(g){for(var e in g){if(g.hasOwnProperty(e)){this[e]=g[e];}}var f=this,d={required:function(j,k,h,i){if(k==false){return false;}return c.trim(j)?false:(f.ERRORS["required_"+h]||f.ERRORS.required);},minLen:function(j,k,h,i){if(!i&&c.trim(j).length==0){return false;}return j.length>=k?false:f.ERRORS.minLen.replace("{n}",k)+" "+selectSklonenie(k,f.SYMBOL_DECLENSIONS);},maxLen:function(j,k,h,i){if(!i&&c.trim(j).length==0){return false;}return j.length<=k?false:f.ERRORS.maxLen.replace("{n}",k)+" "+selectSklonenie(k,f.SYMBOL_DECLENSIONS);},custom:function(h,i){return i.call();}};f.test=function(n,i,l){var m=false;if(i instanceof Object){m=i["required"]||false;}for(var j in i){if(!d[j]){continue;}var h=d[j](n,i[j],l,m);if(h){return h;}}return false;};};b.prototype.Validator.prototype.ERRORS={required:"Заполните поле",minLen:"Введите минимум {n}",maxLen:"Введите максимум {n}",required_login:"Введите логин",required_password:"Введите пароль",required_captcha:"Введите код с картинки"};b.prototype.Validator.prototype.SYMBOL_DECLENSIONS=["символ","символа","символов"];b.prototype.Field=function(f){for(var d in f){if(f.hasOwnProperty(d)){this[d]=f[d];}}var e=this;e.input=e.elem.find(".field_input,.field_select").eq(0);e.holder=e.elem.find(".field_title");e.codeHead=e.elem.find(".field_head");e.codeImg=e.elem.find(".field_captcha");e.codeHead.click(c.proxy(this.refreshCaptcha,this));e.input.on("focus",c.proxy(this.focus,this));e.input.on("blur",c.proxy(this.blur,this));e.input.on("keydown paste propertychange drop",c.proxy(this.valInput,this));e.elem.on("mouseenter",c.proxy(this.hoverIn,this));e.elem.on("mouseleave",c.proxy(this.hoverOut,this));
if(e.elem.hasClass(".field_input")){e.elem.val("");}e.getParams();};b.prototype.Field.prototype={constructor:b.prototype.Field,focus:function(){this.elem.addClass("-focus");this.removeError();},blur:function(){this.elem.removeClass("-focus");if(!this.input.val()){this.holder.show();}},hoverIn:function(){this.elem.addClass("-hover");},hoverOut:function(){this.elem.removeClass("-hover");},refreshCaptcha:function(){var d=this.codeImg[0].src.split("?")[0];this.codeImg[0].src=d+"?ts="+(Math.random()*1000);},valInput:function(){var d=this;d.holder.hide();setTimeout(function(){if(!d.input.val()&&!d.holder.hasClass("disabled")){d.holder.show();}},30);},getParams:function(){var e=this,f={};if(e.elem[0].onclick){f=e.elem[0].onclick();for(var d in f){if(f.hasOwnProperty(d)){e[d]=f[d];}}}},getValue:function(){return this.input.val();},addError:function(f){var e=this,d=c('<div class="field_error">'+f+"</div>");d.one("click",function(){e.removeError();e.input.focus();});e.removeError();e.elem.addClass("-error").append(d);},removeError:function(){var d=this;d.elem.removeClass("-error").find(".field_error").off().remove();}};c.fn[a]=function(d){return this.each(function(){if(!c.data(this,a)){c.data(this,a,new b(this,d));}});};})(jQuery);function JOverlay(a){this.$elem=$(a);this.$popups=this.$elem.find(".b-popup");this.showPopup=function(c,d){var b=this.$popups.filter("#"+c);if(!b.length){return;}if(d){b.find(".popup_inner").html(d);}this.$elem.css("visibility","hidden").show();b.show().css("margin-top",-(b.outerHeight()/2)+"px");this.$elem.css("visibility","").hide().fadeIn(300);};this.hidePopup=function(){this.$elem.fadeOut(300,$.proxy(function(){this.$popups.hide().css({"margin-top":"","margin-left":""});},this));};this.switchPopup=function(b,c){this.$elem.fadeOut(300,$.proxy(function(){this.$popups.hide().css({"margin-top":"","margin-left":""});this.showPopup(b,c);},this));};this.$elem.on("click",".popup_close",$.proxy(this.hidePopup,this));}(function(a){a.fn.JMediaHeightIe=function(c){c=(c||[]).sort().reverse();var e=a(this),b=a("body");e.on("resize",d);d();function d(){var k=e.height(),j=parseInt(b.css("font-size"),10);b[0].className="";for(var g=0,f=c.length;g<f;g++){if(k<=c[g]*j){b[0].className="maxHeight"+c[g]+"em";}}}};})(jQuery);